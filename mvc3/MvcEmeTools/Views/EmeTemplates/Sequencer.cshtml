@model Dominio.Entidades.Escripte
@{
    ViewBag.Title = "Sequencer";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section js{
    <script src="@Url.Content("~/Scripts/jsed/jsed.js")" type="text/javascript"> </script>
    <script src="@Url.Content("~/Scripts/EmeTools/emetools.js")" type="text/javascript"> </script>
    <script type="text/javascript">
        
        $().ready(function () {
            var executarRobo = function () {
                var texto = $("#txtDados").val();
                return new RoboXixi(texto, '\n');
            };

            var roboXixi = executarRobo();
            var resultado = roboXixi.Transformar();

            for (var i = 0; i < roboXixi.Xixizeros.length; i++) {
                var xixizero = roboXixi.Xixizeros[i];
                $("#listaXixizeros").append("<li>" + xixizero.Indice + " - " + xixizero.PrimeiroComentario() + "</li>");
            }

            $("#preResposta").html(resultado);

            $("#listaXixizeros li").click(function () {
                // muda a cor de fundo
                $("#listaXixizeros li").css("background-color", "#fff");
                $(this).css("background-color", "#fee");

                // pega o indice
                var indiceSelecionado = $(this).html().replace(/^([-\d]+).*/, "$1");

                // recupera resultado do indice
                $("#preResposta").html(roboXixi.Xixizeros[indiceSelecionado].DadoTransformado);
            });
        });

    </script>
}
<style>
    #container
    {
        width: 900px;
    }
    
    #divListaXixizeros
    {
        border-color: #eee;
        border-style: solid;
        float: left;
        width: 100%;
        
    }
    
    #listaXixizeros li
    {
        border-color: #eee;
        border-style: solid;
        border-width: 1px;
        padding: 2px;
        width: 90%;
        font-size: 10pt;
        cursor: pointer;
    }
    
    #divResultadoParcial
    {
        border-color: #eee;
        border-style: solid;
        padding: 8px;
        float: left;
        width: 100%;
    }
</style>
<h2>
    Details</h2>
<fieldset>
    <legend>@Model.Nome</legend>
    <div id="container">
        <div id="divListaXixizeros">
            <ul id="listaXixizeros">
            </ul>
        </div>
        <div id="divResultadoParcial">
            <pre id="preResposta"></pre>
        </div>
    </div>

    <br />
    <div class="display-field ">
        @Html.DisplayFor(model => model.Descricao)
    </div>
    <div class="textAreaDados">
        <textarea id="txtDados">@Model.Texto</textarea>
    </div>
    @*    <div>
        <input id="btnExecutar" type="button" value="Executar" />
    </div>
*@
</fieldset>
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.IdSha1 }) |
    @Html.ActionLink("Back to List", "Index")
</p>
